import{v as k}from"./runtime-dom.esm-bundler-aafc7534.js";import{X as p,J as I,e as T,m as v,Q as E,M as R,U as H,K as J,u as g,L as m,ac as K,l as r,aq as L,as as O,a as d,aV as X,aY as Y,p as n,F as w,a3 as B,S,R as Z,ar as j,aZ as G,aW as ee,a_ as te,az as q,W as P,V as ae,ao as oe,ap as se,av as le,a$ as ne}from"./nprogress-ef20a486.js";import{C as re,g as ue}from"./playlist-859584b6.js";import{I as ie}from"./index-261134ad.js";const ce=ie("more",!1,function(t){return p("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[p("circle",{cx:"12",cy:"24",r:"3",fill:t.colors[0]},null),p("circle",{cx:"24",cy:"24",r:"3",fill:t.colors[0]},null),p("circle",{cx:"36",cy:"24",r:"3",fill:t.colors[0]},null)])}),de=I({__name:"ButtonTwoTone",props:{iconClass:{type:String,default:null},iconButton:{type:Boolean,default:!1},horizontalPadding:{type:Number,default:16},color:{type:String,default:"blue"},backgroundColor:{type:String,default:""},textColor:{type:String,default:""},shape:{type:String,default:"square"}},setup(t){const s=t,_=T(()=>{let u={color:"",backgroundColor:"",borderRadius:s.shape==="round"?"50%":"8px",padding:`8px ${s.horizontalPadding}px`,width:s.shape==="round"?"38px":"auto"};return s.backgroundColor!==""&&(u.backgroundColor=s.backgroundColor),s.textColor!==""&&(u.color=s.textColor),u});return(u,i)=>{const a=K("el-icon");return r(),v("button",{style:R(g(_)),class:m(t.color)},[t.iconClass!==null?(r(),E(a,{key:0,style:R({marginRight:t.iconButton?"0px":"8px"})},null,8,["style"])):H("",!0),J(u.$slots,"default",{},void 0,!0)],6)}}});const ve=L(de,[["__scopeId","data-v-adc7edf2"]]),pe=t=>(oe("data-v-295ce28b"),t=t(),se(),t),ye={class:"explore-page"},ge=pe(()=>n("h1",null,"发现",-1)),_e={class:"buttons"},fe=["onClick"],he={class:"panel"},me={class:"name"},Ce={class:"cats"},xe=["onClick"],be={class:"playlists"},ke={class:"load-more"},we=I({__name:"explore",setup(t){const s=O(),_=T(()=>s.settings),u=d(!1),i=d([]),a=d("全部"),C=d(!1),$=d(["语种","风格","场景","情感","主题"]),y=d(!1),f=d(!0),x=d(!1),z=j(),N=()=>{setTimeout(()=>{u.value||q.start()},1e3),a.value=z.query.category===null?"全部":z.query.category,b()},b=()=>(C.value=!0,a.value==="推荐歌单"?F():a.value==="精品歌单"?V():a.value==="排行榜"?M():D()),V=()=>{let e=i,l=e.value.length!==0?e.value[e.value.length-1].updateTime:0;G({limit:50,before:l}).then(o=>{const c=o.data;h(c.playlists),f.value=c.more})},M=()=>{ee().then(e=>{const l=e.data;i.value=[],h(l.list)})},D=()=>{te({order:"hot",cat:a.value,offset:i.value.length}).then(e=>{h(e.data.playlists),f.value=e.data.more})},F=()=>{ue(100).then(e=>{i.value=[],h(e.data)})},h=e=>{i.value.push(...e),C.value=!1,x.value=!0,q.done(),u.value=!0},Q=T(()=>a.value==="排行榜"?"updateFrequency":a.value==="推荐歌单"?"copywriter":"none"),W=e=>{y.value=!1,le.push({name:"explore",query:{category:e}}).catch(l=>{})},U=e=>ne.filter(l=>l.bigCat===e),A=e=>{s.togglePlaylistCategory(e)};return X(()=>{N()}),Y((e,l,o)=>{x.value=!1,f.value=!0,i.value=[],a.value=e.query.category,b(),o()}),(e,l)=>(r(),v("div",ye,[ge,n("div",_e,[(r(!0),v(w,null,B(g(_).enabledPlaylistCategories,o=>(r(),v("div",{key:o,class:m(["button",{active:o===a.value&&!y.value}]),onClick:c=>W(o)},P(o),11,fe))),128)),n("div",{class:m(["button more",{active:y.value}]),onClick:l[0]||(l[0]=o=>y.value=!y.value)},[p(g(ce))],2)]),S(n("div",he,[(r(!0),v(w,null,B($.value,o=>(r(),v("div",{key:o,class:"big-cat"},[n("div",me,P(o),1),n("div",Ce,[(r(!0),v(w,null,B(U(o),c=>(r(),v("div",{key:c.name,class:m(["cat",{active:g(_).enabledPlaylistCategories.includes(c.name)}]),onClick:Be=>A(c.name)},[n("span",null,P(c.name),1)],10,xe))),128))])]))),128))],512),[[k,y.value]]),n("div",be,[p(re,{type:"playlist",items:i.value,"sub-text":g(Q),"show-play-count":a.value!=="排行榜","show-play-button":!0,"image-size":a.value!=="排行榜"?512:1024},null,8,["items","sub-text","show-play-count","image-size"])]),S(n("div",ke,[S(p(ve,{color:"grey",loading:C.value,onClick:b},{default:Z(()=>[ae("加载更多 ")]),_:1},8,["loading"]),[[k,x.value&&f.value]])],512),[[k,["推荐歌单","排行榜"].includes(a.value)===!1]])]))}});const Re=L(we,[["__scopeId","data-v-295ce28b"]]);export{Re as default};
